---
title: Encrypt Data with React
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import { Alert, Alerts } from "@site/src/components/shared/Alert";
import { AuthButtons } from "@site/src/components/docs/AuthButtons";

# Encrypt Data with React

This guide shows you how to implement client-side encryption in React applications using Basis Theory Elements. You'll learn to encrypt sensitive data in React components and send encrypted payloads to your backend for tokenization.

Key concepts in this guide:

- [Client Encryption Keys](/docs/api/client-keys)
- [React Elements](/docs/sdks/web/web-elements?implementation=react)
- [Tokens](/docs/concepts/what-are-tokens)
- [Applications](/docs/api/applications)

## What You'll Build

By the end of this guide, you'll have:
- A React payment form that encrypts card data before submission
- Encrypted payloads sent to your backend instead of plaintext
- Immediate user feedback with React state management
- Reduced frontend latency and improved user experience

## Getting Started

To get started, you will need a Basis Theory account.

<AuthButtons />

Next, you will need two applications:

1. **Management Application** - to create encryption keys
2. **Public Application** - to initialize Elements for your React app

### Management Application

[Click here](https://portal.basistheory.com/applications/create?name=Encryption%20Key%20Manager&type=management&permissions=key%3Acreate) to create a Management Application or [login to your Basis Theory account](https://portal.basistheory.com/applications) and create a new application with the following settings:

- Name - Encryption Key Manager
- Application Type - Management
- Permissions - `key:create`

<Alert>Save the API Key from the created Management Application as it will be used to create encryption keys.</Alert>

### Public Application

[Click here](https://portal.basistheory.com/applications/create?permissions=&type=public&name=Encrypt%20Data%20with%20React%20Guide) to create a Public Application or [login to your Basis Theory account](https://portal.basistheory.com/applications) and create a new application with the following settings:

- Name - Encrypt Data with React Guide
- Application Type - Public
- Permissions - (none required for client-side encryption)

<Alert>Save the API Key from the created Public Application as it will be used later in this guide to initialize the form.</Alert>

## Step 1: Generate Client Encryption Keys

Create encryption keys using your Management Application. These keys enable client-side encryption.

```bash
curl -X POST "https://api.basistheory.com/keys" \
  -H "BT-API-KEY: <MANAGEMENT_API_KEY>" \
  -H "Content-Type: application/json" \
  -d '{
    "expires_at": "2025-12-31T23:59:59Z"
  }'
```

<Alert>Be sure to replace <code>&lt;MANAGEMENT_API_KEY></code> with the Management API Key you created in the <a href="#getting-started">Getting Started</a> step.</Alert>

**Expected Response:**
```json
{
  "id": "b1e2c3d4-5678-1234-9abc-def012345678",
  "publicKeyPEM": "-----BEGIN PUBLIC KEY-----\nWQ4geAENWHyR7+g94nN6lFZzY7YdGWxPtlX/16fJ4z0=\n-----END PUBLIC KEY-----",
  "expires_at": "2025-12-31T23:59:59Z"
}
```

<Alert type={Alerts.WARNING}>Save the public key (<code>publicKeyPEM</code>) and key ID (<code>id</code>) - you'll need both for client-side encryption. The public key is only returned when creating a key. Make sure to securely store it, as you won't be able to retrieve it later.</Alert>

## Step 2: Setup the Project

We will create a new React application using the [`create-react-app`](https://reactjs.org/docs/create-a-new-react-app.html#create-react-app) template.

Run the following in your terminal:

```shell showLineNumbers
npx create-react-app encrypt-react-guide
cd encrypt-react-guide
npm start
```

This will scaffold a new React app called `encrypt-react-guide` and will launch the new application when completed.

## Step 3: Install the React Elements SDK

We will need to install Basis Theory's [React Elements SDK](/docs/sdks/web/web-elements?implementation=react), which will render secure Elements for capturing data and provide encryption capabilities.

Run the following in a terminal to install the React SDK:

```shell
npm install --save @basis-theory/basis-theory-react @basis-theory/basis-theory-js
```

## Step 4: Initialize the SDK

Now we need to initialize Basis Theory React Elements. Open the `App.js` file in the `src` directory and replace the contents with the following:

```jsx showLineNumbers title="src/App.js"
import {
  BasisTheoryProvider,
  useBasisTheory,
} from '@basis-theory/basis-theory-react';

// Your encryption key details from Step 1
const ENCRYPTION_CONFIG = {
  keyId: 'b1e2c3d4-5678-1234-9abc-def012345678',
  publicKeyPEM: `-----BEGIN PUBLIC KEY-----
WQ4geAENWHyR7+g94nN6lFZzY7YdGWxPtlX/16fJ4z0=
-----END PUBLIC KEY-----`
};

function App() {
  const { bt } = useBasisTheory('<PUBLIC_API_KEY>');

  return (
    <BasisTheoryProvider bt={bt}>
      <div className="App">
        <h1>Client-Side Encryption Demo</h1>
        {/* Payment form will go here */}
      </div>
    </BasisTheoryProvider>
  );
}

export default App;
```

<Alert>Be sure to replace <code>&lt;PUBLIC_API_KEY></code> with the Public API Key you created in the <a href="#getting-started">Getting Started</a> step, and update the encryption key details with your actual key ID and public key PEM.</Alert>

This code is importing the Basis Theory React SDK, initializing the SDK via `useBasisTheory`, and setting up the encryption configuration.

## Step 5: Add Card Form Components

Now we need to add Basis Theory React components to our page. We will add [Card Elements](/docs/sdks/web/web-elements/components#cardelement) for collecting payment card data.

We will import the Card Elements and add them inside our `BasisTheoryProvider`:

```jsx showLineNumbers title="src/App.js"
// highlight-next-line
import { useRef, useState } from 'react';

import {
  BasisTheoryProvider,
  // highlight-start
  CardNumberElement,
  CardExpirationDateElement,
  CardVerificationCodeElement,
  // highlight-end
  useBasisTheory,
} from '@basis-theory/basis-theory-react';

// Your encryption key details from Step 1
const ENCRYPTION_CONFIG = {
  keyId: 'b1e2c3d4-5678-1234-9abc-def012345678',
  publicKeyPEM: `-----BEGIN PUBLIC KEY-----
WQ4geAENWHyR7+g94nN6lFZzY7YdGWxPtlX/16fJ4z0=
-----END PUBLIC KEY-----`
};

function App() {
  const { bt } = useBasisTheory('<PUBLIC_API_KEY>');
  // highlight-start
  const cardNumberRef = useRef(null);
  const expirationDateRef = useRef(null);
  const cvcRef = useRef(null);
  // highlight-end

  return (
    <BasisTheoryProvider bt={bt}>
      <div className="App">
        <h1>Client-Side Encryption Demo</h1>
        
        // highlight-start
        <form style={{ maxWidth: '400px', margin: '0 auto', padding: '20px' }}>
          <div style={{ marginBottom: '15px' }}>
            <label>Cardholder Name</label>
            <input
              type="text"
              placeholder="John Doe"
              style={{ width: '100%', padding: '10px', marginTop: '5px' }}
            />
          </div>
          
          <div style={{ marginBottom: '15px' }}>
            <label>Card Number</label>
            <CardNumberElement
              ref={cardNumberRef}
              options={{
                style: {
                  base: {
                    color: '#333',
                    fontFamily: 'Arial, sans-serif',
                    fontSize: '16px',
                    padding: '10px'
                  }
                }
              }}
            />
          </div>
          
          <div style={{ marginBottom: '15px' }}>
            <label>Expiration Date</label>
            <CardExpirationDateElement
              ref={expirationDateRef}
              options={{
                style: {
                  base: {
                    color: '#333',
                    fontFamily: 'Arial, sans-serif',
                    fontSize: '16px',
                    padding: '10px'
                  }
                }
              }}
            />
          </div>
          
          <div style={{ marginBottom: '15px' }}>
            <label>CVC</label>
            <CardVerificationCodeElement
              ref={cvcRef}
              options={{
                style: {
                  base: {
                    color: '#333',
                    fontFamily: 'Arial, sans-serif',
                    fontSize: '16px',
                    padding: '10px'
                  }
                }
              }}
            />
          </div>
        </form>
        // highlight-end
      </div>
    </BasisTheoryProvider>
  );
}

export default App;
```

This will create new instances of Card Elements that will inject secure iFrames rendered by Basis Theory. The Basis Theory SDK will hold references to the Card Elements which enables interactions with the underlying data without direct access to the values.

We are also leveraging [Refs](https://react.dev/learn/referencing-values-with-refs) to hold references to our Card Elements.

## Step 6: Encrypt and Submit Card Data

We want to encrypt the card data before sending it to our backend. We need to add a submit button and a handler that encrypts the underlying data.

We also want to display the result by adding state to hold the response and a `<pre>` element to display the value.

```jsx showLineNumbers title="src/App.js"
import { useRef, useState } from 'react';

import {
  BasisTheoryProvider,
  CardNumberElement,
  CardExpirationDateElement,
  CardVerificationCodeElement,
  useBasisTheory,
} from '@basis-theory/basis-theory-react';

// Your encryption key details from Step 1
const ENCRYPTION_CONFIG = {
  keyId: 'b1e2c3d4-5678-1234-9abc-def012345678',
  publicKeyPEM: `-----BEGIN PUBLIC KEY-----
WQ4geAENWHyR7+g94nN6lFZzY7YdGWxPtlX/16fJ4z0=
-----END PUBLIC KEY-----`
};

function App() {
  const { bt } = useBasisTheory('<PUBLIC_API_KEY>');
  const cardNumberRef = useRef(null);
  const expirationDateRef = useRef(null);
  const cvcRef = useRef(null);
  
  // highlight-start
  const [result, setResult] = useState('');
  const [isLoading, setIsLoading] = useState(false);

  const submit = async (event) => {
    event.preventDefault();
    
    if (!bt || !cardNumberRef.current || !expirationDateRef.current || !cvcRef.current) {
      setResult('Error: Payment form not properly initialized');
      return;
    }

    setIsLoading(true);
    setResult('Encrypting payment data...');

    try {
      // Create the token payload that will be encrypted
      const tokenPayload = {
        type: 'card',
        data: {
          number: cardNumberRef.current,
          expiration_month: expirationDateRef.current,
          expiration_year: expirationDateRef.current,
          cvc: cvcRef.current
        },
        metadata: {
          source: 'react_encrypted'
        }
      };

      // Encrypt the payload using the public key
      const encryptedPayload = await bt.encrypt({
        payload: tokenPayload,
        publicKey: ENCRYPTION_CONFIG.publicKeyPEM,
        keyId: ENCRYPTION_CONFIG.keyId
      });

      // Send encrypted payload to backend
      const response = await sendToBackend(encryptedPayload);
      
      setResult(JSON.stringify(response, null, 2));
    } catch (error) {
      setResult(`Error: ${error.message}`);
    } finally {
      setIsLoading(false);
    }
  };

  const sendToBackend = async (encryptedPayload) => {
    const response = await fetch('/api/process-encrypted-payment', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ encryptedPayload })
    });

    if (!response.ok) {
      throw new Error(`Backend error: ${response.status}`);
    }

    return response.json();
  };
  // highlight-end

  return (
    <BasisTheoryProvider bt={bt}>
      <div className="App">
        <h1>Client-Side Encryption Demo</h1>
        
        <form onSubmit={submit} style={{ maxWidth: '400px', margin: '0 auto', padding: '20px' }}>
          <div style={{ marginBottom: '15px' }}>
            <label>Cardholder Name</label>
            <input
              type="text"
              placeholder="John Doe"
              style={{ width: '100%', padding: '10px', marginTop: '5px' }}
              // highlight-next-line
              disabled={isLoading}
            />
          </div>
          
          <div style={{ marginBottom: '15px' }}>
            <label>Card Number</label>
            <CardNumberElement
              ref={cardNumberRef}
              options={{
                style: {
                  base: {
                    color: '#333',
                    fontFamily: 'Arial, sans-serif',
                    fontSize: '16px',
                    padding: '10px'
                  }
                },
                // highlight-next-line
                disabled: isLoading
              }}
            />
          </div>
          
          <div style={{ marginBottom: '15px' }}>
            <label>Expiration Date</label>
            <CardExpirationDateElement
              ref={expirationDateRef}
              options={{
                style: {
                  base: {
                    color: '#333',
                    fontFamily: 'Arial, sans-serif',
                    fontSize: '16px',
                    padding: '10px'
                  }
                },
                // highlight-next-line
                disabled: isLoading
              }}
            />
          </div>
          
          <div style={{ marginBottom: '15px' }}>
            <label>CVC</label>
            <CardVerificationCodeElement
              ref={cvcRef}
              options={{
                style: {
                  base: {
                    color: '#333',
                    fontFamily: 'Arial, sans-serif',
                    fontSize: '16px',
                    padding: '10px'
                  }
                },
                // highlight-next-line
                disabled: isLoading
              }}
            />
          </div>

          // highlight-start
          <button 
            type="submit"
            disabled={isLoading}
            style={{
              width: '100%',
              padding: '12px',
              backgroundColor: isLoading ? '#6c757d' : '#007bff',
              color: 'white',
              border: 'none',
              borderRadius: '4px',
              fontSize: '16px',
              cursor: isLoading ? 'not-allowed' : 'pointer'
            }}
          >
            {isLoading ? 'Encrypting...' : 'Encrypt and Submit'}
          </button>

          {result && (
            <pre style={{ 
              marginTop: '20px', 
              padding: '15px', 
              backgroundColor: '#f8f9fa', 
              borderRadius: '4px',
              fontSize: '12px',
              overflow: 'auto'
            }}>
              {result}
            </pre>
          )}
          // highlight-end
        </form>
      </div>
    </BasisTheoryProvider>
  );
}

export default App;
```

When our form is submitted, Basis Theory's SDK will encrypt the Element values using the provided public key. This will be securely encrypted directly in the browser. The resulting encrypted payload can then be safely sent to your backend for token creation.

## Step 7: Handle Encrypted Payloads in Your Backend

Your backend receives the encrypted payloads and creates tokens using the encrypted data.

<Tabs className="bt-tabs" groupId="languages">
  <TabItem value="node" label="Node.js (Express)">

```javascript title="server.js"
const express = require('express');
const { BasisTheory } = require('@basis-theory/basis-theory-js');

const app = express();
app.use(express.json());

// Initialize Basis Theory with your Private Application key
const bt = new BasisTheory('<PRIVATE_API_KEY>');

app.post('/api/process-encrypted-payment', async (req, res) => {
    try {
        const { encryptedPayload } = req.body;

        console.log('Processing encrypted payment...');

        // Create token using encrypted payload
        const token = await bt.tokens.create({
            type: 'card',
            encrypted: encryptedPayload,
            metadata: {
                processed_at: new Date().toISOString()
            }
        });

        console.log('Token created:', token.id);

        res.json({
            success: true,
            tokenId: token.id,
            message: 'Payment processed successfully'
        });

    } catch (error) {
        console.error('Error processing encrypted payment:', error);
        
        res.status(500).json({
            success: false,
            error: error.message || 'Payment processing failed'
        });
    }
});

app.listen(3001, () => {
    console.log('Server running on port 3001');
});
```

  </TabItem>
  <TabItem value="nextjs" label="Next.js API Route">

```typescript title="pages/api/process-encrypted-payment.ts"
import type { NextApiRequest, NextApiResponse } from 'next';
import { BasisTheory } from '@basis-theory/basis-theory-js';

const bt = new BasisTheory(process.env.PRIVATE_API_KEY!);

interface ResponseData {
  success: boolean;
  tokenId?: string;
  message?: string;
  error?: string;
}

export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse<ResponseData>
) {
  if (req.method !== 'POST') {
    return res.status(405).json({ success: false, error: 'Method not allowed' });
  }

  try {
    const { encryptedPayload } = req.body;

    console.log('Processing encrypted payment...');

    // Create token using encrypted payload
    const token = await bt.tokens.create({
      type: 'card',
      encrypted: encryptedPayload,
      metadata: {
        processed_at: new Date().toISOString()
      }
    });

    console.log('Token created:', token.id);

    res.status(200).json({
      success: true,
      tokenId: token.id,
      message: 'Payment processed successfully'
    });

  } catch (error) {
    console.error('Error processing encrypted payment:', error);
    
    res.status(500).json({
      success: false,
      error: error instanceof Error ? error.message : 'Payment processing failed'
    });
  }
}
```

  </TabItem>
</Tabs>

## Running the Example

We can run our resulting application by running the following in a terminal:

```shell showLineNumbers
npm start
```

This will open the React application in our browser to [http://localhost:3000/](http://localhost:3000/)

### Test the Encryption Flow

1. **Load the page**: Elements should mount without errors
2. **Enter card details**: Use test card number `4242424242424242`
3. **Submit form**: Should show "Encrypting..." then success message
4. **Check result**: Should display the backend response with token ID

### Test Card Numbers

Use these test card numbers for development:

| Card Number | Brand | Description |
|-------------|-------|-------------|
| 4242424242424242 | Visa | Valid card for testing |
| 5555555555554444 | Mastercard | Valid card for testing |
| 378282246310005 | American Express | Valid card for testing |

## Error Handling

### Common Errors and Solutions

**"bt is undefined"**
- Ensure component is wrapped in `BasisTheoryProvider`
- Check that the provider has the correct API key
- Verify the provider is mounted before child components

**"Elements not mounting"**
- Verify refs are properly attached
- Check for console errors during mount
- Ensure Elements are inside BasisTheoryProvider

**"Unable to decrypt token"**
- The encrypted data is malformed or cannot be decrypted
- Check that your Public API key is correct

**"Unrecognized client encryption key"**
- The key used for encryption has been deleted or expired

## Conclusion

You can now capture and encrypt sensitive card data in your React application without your frontend accessing the underlying values, drastically reducing compliance and regulatory scope.

Try entering card details and clicking the submit button to securely encrypt the data directly in the browser and send encrypted payloads to your backend. The resulting encrypted payload can be safely transmitted and processed by your server infrastructure.

## Learn More

- [Client Encryption Keys API](/docs/api/client-keys)
- [What are tokens?](/docs/concepts/what-are-tokens)
- [Encrypt data from Web](/docs/guides/encrypt/encrypt-data-from-web) 